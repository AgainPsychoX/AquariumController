<!DOCTYPE html>
<html lang="pl">
<head>
	<meta charset="UTF-8">
	<title>Kontroler akwarium morskiego</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/png" href="favicon.png" />
	<link rel="stylesheet" href="style.css" type="text/css">
	<meta name="author" content="Patryk Ludwikowski (patryk.ludwikowski.7@gmail.com)">
</head>
<body>
	<header>
		<div class="nice-container">
			<div class="content">
				<h1>Kontroler akwarium morskiego</h1>
				<div style="font-size: xx-large;">ğŸŸğŸ ğŸ¡ğŸŒŠ</div>
			</div>
		</div>
	</header>
	<main>
		<div class="nice-container">
			<section id="status">
				<div class="header-with-aside">
					<h2>Status kontrolera</h2>
					<div class="flex-center small spaced" style="color: gray;">
						<label>
							<span>SiÅ‚a sygnaÅ‚u WiFi:</span>
							<output name="rssi"></output>
						</label>
						<label>
							<span>Ping:</span>
							<output name="ping"></output>
						</label>
					</div>
				</div>
				<div class="grid">
					<div class="subgrid" style="width: 250px;">
						<label>
							<span>Czas ukÅ‚adu:</span>
							<output name="datetime"></output>
						</label>
					</div>
					<div class="subgrid columns-70-30" style="width: 250px;">
						<label>
							<span>Temperatura ukÅ‚adu:</span>
							<output name="rtcTemperature"></output>
						</label>
						<label>
							<span>Temperatura wody:</span>
							<output name="waterTemperature"></output>
						</label>
						<label>
							<span>Ogrzewanie/chÅ‚odzenie:</span>
							<output name="heatingStatus"></output>
						</label>
					</div>
					<div class="subgrid columns-70-30" style="width: 230px;">
						<label>
							<span>Poziom pH wody:</span>
							<output name="phLevel"></output>
						</label>
						<label>
							<span>Poziom wody akwarium:</span>
							<output name="waterLevel"></output>
						</label>
						<label>
							<span>Poziom dolewki RO:</span>
							<output name="refillTankLevel"></output>
						</label>
					</div>
				</div>
			</section>
			<section id="colors">
				<div class="header-with-aside">
					<h2>OÅ›wietlenie</h2>
					<div class="flex-center small spaced">
						<label>
							<input type="checkbox" name="manual">
							<span>Manualne ustawienie</span>
						</label>
						<label title="JeÅ›li zaznaczone, wymusza podglÄ…d na 5 sekund po prÃ³bie zmiany suwakÃ³w." style="display: none;">
							<input type="checkbox" name="previewOnChange" checked>
							<span>PodglÄ…d przy zmianie</span>
						</label>
					</div>
				</div>
				<figure class="grid">
					<span>Czerwone:</span>
					<input type="range" min="0" max="255" value="0" step="1" name="red" />
					<input type="number" min="0" max="255" value="0" step="1" title="WartoÅ›Ä‡ surowa" name="red" />
					<span>Zielone:</span>
					<input type="range" min="0" max="255" value="0" step="1" name="green" />
					<input type="number" min="0" max="255" value="0" step="1" title="WartoÅ›Ä‡ surowa" name="green"/>
					<span>Niebieskie:</span>
					<input type="range" min="0" max="255" value="0" step="1" name="blue" />
					<input type="number" min="0" max="255" value="0" step="1" title="WartoÅ›Ä‡ surowa" name="blue" />
					<span>BiaÅ‚e:</span>
					<input type="range" min="0" max="255" value="0" step="1" name="white" />
					<input type="number" min="0" max="255" value="0" step="1" title="WartoÅ›Ä‡ surowa" name="white" />
				</figure>
				<h3>Cykl dobowy oÅ›wietlania</h3>
				<figure class="colors-cycle">
					<table>
						<thead>
							<tr>
								<th></th>
								<th></th>
								<th></th>
								<th title="Godzina o ktÃ³rej wybrane ustawienia bÄ™dÄ… w peÅ‚ni zastosowane.">Punkt&nbsp;doby</th>
								<th>Czerwone</th>
								<th>Zielone</th>
								<th>Niebieskie</th>
								<th>BiaÅ‚e</th>
								<th></th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<template>
								<tr>
									<td><button name="remove" title="UsuÅ„ wpis">â¨¯</button></td>
									<td><button name="move-up" title="PrzesuÅ„ wpis do gÃ³ry">â†‘</button></td>
									<td><button name="move-down" title="PrzesuÅ„ wpis w dÃ³Å‚">â†“</button></td>
									<td><input type="time" step="60" value="12:00" /></td>
									<td><input type="number" min="0" max="255" value="0" step="1" title="WartoÅ›Ä‡ surowa" name="red" /></td>
									<td><input type="number" min="0" max="255" value="0" step="1" title="WartoÅ›Ä‡ surowa" name="green" /></td>
									<td><input type="number" min="0" max="255" value="0" step="1" title="WartoÅ›Ä‡ surowa" name="blue" /></td>
									<td><input type="number" min="0" max="255" value="0" step="1" title="WartoÅ›Ä‡ surowa" name="white" /></td>
									<td><button name="preview" title="WyÅ›lij ustawienie z wpisu do podglÄ…du">PokaÅ¼</button></td>
									<td><button name="set-from-current" title="Ustaw wpis z obecnych ustawieÅ„">â†µ</button></td>
									<td><button name="clone" title="Sklonuj wpis">ğŸ“‹</button></td>
								</tr>
							</template>
						</tbody>
					</table>
				</figure>
				<div class="flex-center spaced">
					<button name="add-from-current">Dodaj obecne</button>
					<button name="upload">WyÅ›lij ustawienia</button>
					<button name="download">Pobierz ustawienia</button>
					<button name="reset">Resetuj do domyÅ›lnych</button>
				</div>
			</section>
			<section id="heating">
				<h2>Temperatura wody</h2>
				<div class="flex-evenly spaced">
					<label>
						<span>Temperatura minimalna:</span>
						<input type="number" min="0.0" max="60.0" step="0.25" name="waterTemperatures.minimal" />
						<span>Â°C</span>
					</label>
					<label>
						<span>Temperatura optymalna:</span>
						<input type="number" min="0.0" max="60.0" step="0.25" name="waterTemperatures.optimal" />
						<span>Â°C</span>
					</label>
					<label>
						<span>Temperatura maksymalna:</span>
						<input type="number" min="0.0" max="60.0" step="0.25" name="waterTemperatures.maximal" />
						<span>Â°C</span>
					</label>
				</div>
			</section>
			<section id="circulator">
				<h2>Cyrkulacja wody</h2>
				<div class="flex-evenly spaced">
					<label>
						<span>Czas aktywny:</span>
						<input type="time" step="1" min="00:00:00" max="18:00:00" name="circulatorActiveTime">
					</label>
					<label>
						<span>Czas przerwy:</span>
						<input type="time" step="1" min="00:00:00" max="18:00:00" name="circulatorPauseTime">
					</label>
				</div>
			</section>
			<section id="minerals">
				<h2>Dozowanie mikroelementÃ³w (balling)</h2>
				<div class="grid">
					<template>
						<div class="item spaced">
							<h3><abbr>XD</abbr> <small></small></h3>
							<label>
								<span>Godzina:</span>
								<input type="time" step="60" value="12:00">
							</label>
							<label>
								<span>Dawka:</span>
								<input type="number" min="0" max="250" step="1" value="50">
								<span>mL</span>
							</label>
							<div class="flex-center spaced">
								<button name="manual-dose">Jedna dawka manualnie</button>
								<button name="calibrate">Kalibracja</button>
							</div>
						</div>
					</template>
				</div>
			</section>
			<section id="other">
				<h2>Inne ustawienia</h2>
				<div class="flex-evenly spaced">
					<label>
						<span>CzÄ™stotliwoÅ›Ä‡ wysyÅ‚ania odczytÃ³w do chmury:</span>
						<input type="time" step="1" min="00:00:10" max="02:00:00" name="cloudLoggingInterval" />
					</label>
				</div>
				<div class="flex-center spaced">
					<button name="synchronize-time">Synchronizuj czas</button>
					<button name="ph-calibrate">Kalibracja sensora pH</button>
					<button name="open-network-settings">Ustawienia sieciowe</button>
				</div>
			</section>
			<section id="save">
				<h2>Zapisywanie ustawieÅ„</h2>
				<div class="flex-center spaced">
					<button name="save-eeprom">Zapisz ustawienia na EEPROM</button>
				</div>
			</section>
			<section id="charts">
				<div class="header-with-aside">
					<h2>Wykres</h2>
					<div class="flex-center small spaced">
						<a href="#chart" onclick="focusChartSelectionOn(new Date(new Date().getTime() - 60 * 60 * 1000), new Date())">PokaÅ¼ ostatniÄ… godzinÄ™</a>
						<a href="#chart" onclick="focusChartSelectionOn(new Date(new Date().getTime() - 24 * 60 * 60 * 1000), new Date())">PokaÅ¼ ostatniÄ… dobÄ™</a>
						<a href="wykres.html">OtwÃ³rz na peÅ‚nej stronie</a>
					</div>
				</div>
				<svg id="chart" width="100%" height="500"></svg>
			</section>
		</div>
	</main>
	<dialog id="ph-calibration">
		<h3>Kalibracja pH metru</h3>
		<ul>
			<li>
				Przygotuj 2 lub 3 roztworÃ³w o znanych poziomach pH (pamiÄ™taj o odpowiedniej temperaturze i dobrze rozmieszaÄ‡).
			</li>
			<li>
				Zanurzaj sondÄ™ pH w kolejnych roztworach. PamiÄ™taj, Å¼eby miÄ™dzy zanurzeniami wyczyÅ›ciÄ‡ sondÄ™ w wodzie dejonizowanej, by zapobiec mieszaniu siÄ™ badanych roztworÃ³w.
			</li>
			<li>
				Przy kaÅ¼dym zanurzeniu w badanym roztworze, po kilku lub kilkunastu sekundach (gdy odczytywana wartoÅ›Ä‡ siÄ™ ustabilizuje) kliknij poniÅ¼ej, Å¼eby uÅ¼yÄ‡ prÃ³bki. Wpisz oczekiwanÄ… wartoÅ›Ä‡ pH dla danej prÃ³bki.
			</li>
		</ul>
		<h4>Odczyt</h4>
		<figure>
			<table class="loose-table readings">
				<thead>
					<tr>
						<th>WybÃ³r</th>
						<th>Å¹rÃ³dÅ‚o</th>
						<th>WartoÅ›ci</th>
						<th>Stare pH</th>
						<th>Nowe pH</th>
						<th>NapiÄ™cie</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td><input type="radio" name="source" value="normal"></td>
						<td>WartoÅ›Ä‡</td>
						<td><output name="adc">800</output></td>
						<td><output name="pH">7.42</output></td>
						<td><output name="pH_new">7.01</output></td>
						<td><output name="voltage">2.3</output></td>
					</tr>
					<tr>
						<td><input type="radio" name="source" value="average" checked></td>
						<td>Åšrednia</td>
						<td><output name="adc">800</output></td>
						<td><output name="pH">7.42</output></td>
						<td><output name="pH_new">7.01</output></td>
						<td><output name="voltage">2.3</output></td>
					</tr>
				</tbody>
			</table>
		</figure>
		<h4>PrÃ³bki</h4>
		<figure>
			<table class="loose-table points">
				<thead>
					<tr>
						<th>Lp.</th>
						<th>Odczyt</th>
						<th>pH</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<template>
						<tr>
							<td>1.</td>
							<td><input type="number" min="0" max="4096" name="adc" /></td>
							<td><input type="number" min="0" max="14" step="0.01" name="pH" /></td>
							<td><button name="select">Wybierz â†µ</button></td>
						</tr>
					</template>
				</tbody>
			</table>
		</figure>
		<div class="flex spaced" style="justify-content: end;">
			<button name="save">Zapisz</button>
			<button name="cancel">Anuluj</button>
		</div>
	</dialog>
	<dialog id="network-settings">
		<form method="dialog">
			<h3>Ustawienia sieciowe</h3>

			<figure>
				<label>
					<input type="radio" name="mode" value="sta">
					<span>PoÅ‚Ä…cz do sieci</span>
				</label>
				<label>
					<input type="radio" name="mode" value="ap">
					<span>UtwÃ³rz Access Point</span>
				</label>
				<label>
					<input type="checkbox" name="fallback-ap">
					<span>Uruchom Access Point, jeÅ›li nie moÅ¼na poÅ‚Ä…czyÄ‡ siÄ™ do&nbsp;skonfigurowanej sieci.</span>
				</label>
			</figure>

			<h4>SieÄ‡</h4>
			<figure class="grid">
				<label>
					<span>SSID:</span>
					<input name="ssid" type="text" maxlength="30" />
				</label>
				<label>
					<span>HasÅ‚o:</span>
					<input name="psk" type="password" autocomplete="psk" maxlength="30" pattern="^$|^.{8,}$" title="HasÅ‚o musi zawieraÄ‡ co najmniej 8 znakÃ³w." />
				</label>
			</figure>

			<h4>Ustawienia IP</h4>
			<figure>
				<label>
					<input type="checkbox" name="auto-ip">
					<span>Ustawienia automatyczne (DHCP)</span>
				</label>
			</figure>
			<figure id="static" class="grid">
				<label>
					<span>Adres:</span>
					<input name="ip" type="text" minlength="7" maxlength="15" size="15" pattern="^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}([1-9]\d?|1\d\d|2[0-4]\d|25[0-5])$" title="Adres IP dla urzÄ…dzenia. PrzykÅ‚ad: 192.168.55.201" />
				</label>
				<label class="mask">
					<span>DÅ‚ugoÅ›Ä‡ maski:</span>
					<input name="mask" type="number" min="8" max="31" title="DÅ‚ugoÅ›Ä‡ maski sieci. PrzykÅ‚ad: 24 dla 255.255.255.0" />
				</label>
				<label>
					<span>Brama:</span>
					<input name="gateway" type="text" minlength="7" maxlength="15" size="15" pattern="^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}([1-9]\d?|1\d\d|2[0-4]\d|25[0-5])$" title="Adres bramy sieci (routera). PrzykÅ‚ad: 192.168.55.1" />
				</label>
				<label>
					<span>DNS 1:</span>
					<input name="dns1" type="text" minlength="7" maxlength="15" size="15" pattern="^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}([0-9]\d?|1\d\d|2[0-4]\d|25[0-5])$" title="Adres preferowanego serwera DNS. PrzykÅ‚ad: 1.1.1.1" />
				</label>
				<label>
					<span>DNS 2:</span>
					<input name="dns2" type="text" minlength="7" maxlength="15" size="15" pattern="^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}([0-9]\d?|1\d\d|2[0-4]\d|25[0-5])$" title="Adres alternatywnego serwera DNS. PrzykÅ‚ad: 1.0.0.1" />
				</label>
			</figure>

			<div class="flex spaced" style="justify-content: end;">
				<button name="save">Zapisz</button>
				<button name="cancel">Anuluj</button>
			</div>
		</form>
	</dialog>
	<script src="https://d3js.org/d3.v4.min.js" onerror="alert('Nie moÅ¼na zaÅ‚adowaÄ‡ biblioteki D3JS dla wykresÃ³w. Brak poÅ‚Ä…czenia z internetem?')" defer></script>
	<script type="text/javascript" src="charts.js" defer></script>
	<script type="text/javascript" src="main.js" defer></script>
</body>
</html>